®
ˆ/home/thomas/stack/School/Semester 3/Individueel project/minecraft-panel-api/minecraft-panel-api.Players/Controllers/PlayerController.cs
	namespace 	
minecraft_panel_api
 
. 
Players %
.% &
Controllers& 1
{ 
[ 
ApiController 
] 
[ 
Route 

( 
$str "
)" #
]# $
public 

class 
PlayerController !
:" #
ControllerBase$ 2
{ 
private 
readonly 
IHubContext $
<$ %
SocketTestHub% 2
>2 3
_hub4 8
;8 9
private 
readonly "
MinecraftPluginContext /
_context0 8
;8 9
public 
PlayerController 
(  
IHubContext  +
<+ ,
SocketTestHub, 9
>9 :
hub; >
,> ?"
MinecraftPluginContext@ V
contextW ^
)^ _
{ 	
_hub 
= 
hub 
; 
_context 
= 
context 
; 
} 	
[ 	
HttpPost	 
( 
$str !
)! "
]" #
public 
async 
Task 
< 
Player  
>  !
GetPlayerData" /
(/ 0
Player0 6
player7 =
)= >
{ 	
return 
await 
_context !
.! "
Players" )
.) *
FirstOrDefaultAsync* =
(= >
x> ?
=>@ B
xC D
.D E
UserNameE M
==N P
playerQ W
.W X
UserNameX `
)` a
;a b
} 	
[!! 	
HttpGet!!	 
]!! 
public"" 
async"" 
Task"" 
<"" 
string""  
>""  !
GetPlayersMC""" .
("". /
)""/ 0
{## 	
var$$ 
client$$ 
=$$ 
new$$ 

RestClient$$ '
($$' (
$str$$( @
)$$@ A
;$$A B
var&& 
request&& 
=&& 
new&& 
RestRequest&& )
(&&) *
$str&&* ?
,&&? @

DataFormat&&A K
.&&K L
Json&&L P
)&&P Q
;&&Q R
request'' 
.'' 
	AddHeader'' 
('' 
$str'' ,
,'', -
$str''. @
)''@ A
;''A B
var)) 
timeline)) 
=)) 
await))  
client))! '
.))' (
GetAsync))( 0
<))0 1
dynamic))1 8
>))8 9
())9 :
request)): A
,))A B
CancellationToken))C T
.))T U
None))U Y
)))Y Z
;))Z [
return++ 
$str++ ,
+++- .
timeline++/ 7
;++7 8
},, 	
[.. 	
HttpPost..	 
].. 
public// 
async// 
Task// 

SendString// $
(//$ %
)//% &
{00 	
await11 
_hub11 
.11 
Clients11 
.11 
All11 "
.11" #
	SendAsync11# ,
(11, -
$str11- =
,11= >
$str11? C
,11C D
$str11E I
)11I J
;11J K
}22 	
}33 
}44 Ã
~/home/thomas/stack/School/Semester 3/Individueel project/minecraft-panel-api/minecraft-panel-api.Players/Hubs/SocketTestHub.cs
	namespace 	
minecraft_panel_api
 
. 
Players %
.% &
Hubs& *
{ 
public 

class 
SocketTestHub 
:  
Hub! $
{		 
public

 
override

 
Task

 
OnConnectedAsync

 -
(

- .
)

. /
{ 	
Console 
. 
	WriteLine 
( 
$str 7
+8 9
Context: A
.A B
ConnectionIdB N
)N O
;O P
Clients 
. 
Client 
( 
Context "
." #
ConnectionId# /
)/ 0
.0 1
	SendAsync1 :
(: ;
$str; J
,J K
ContextL S
.S T
ConnectionIdT `
)` a
;a b
return 
base 
. 
OnConnectedAsync (
(( )
)) *
;* +
} 	
public 
async 
Task 
PlayerJoinEvent )
() *
string* 0
user1 5
)5 6
{ 	
Console 
. 
	WriteLine 
( 
user "
+# $
$str% ?
)? @
;@ A
await 
Clients 
. 
Others  
.  !
	SendAsync! *
(* +
$str+ <
,< =
user> B
,B C
$strD ]
)] ^
;^ _
} 	
public 
async 
Task 
PlayerQuitEvent )
() *
string* 0
user1 5
)5 6
{ 	
Console 
. 
	WriteLine 
( 
user "
+# $
$str% =
)= >
;> ?
await 
Clients 
. 
Others  
.  !
	SendAsync! *
(* +
$str+ <
,< =
user> B
,B C
$strD [
)[ \
;\ ]
} 	
public 
async 
Task 
ReceiveMessage (
(( )
string) /
user0 4
,4 5
string6 <
message= D
)D E
{ 	
Console   
.   
	WriteLine   
(   
user   "
+  # $
$str  % )
+  * +
message  , 3
)  3 4
;  4 5
await!! 
Clients!! 
.!! 
Others!!  
.!!  !
	SendAsync!!! *
(!!* +
$str!!+ ;
,!!; <
user!!= A
,!!A B
message!!C J
)!!J K
;!!K L
}"" 	
public77 
async77 
Task77 
SendMessage77 %
(77% &
string77& ,
user77- 1
,771 2
string773 9
message77: A
)77A B
{88 	
await99 
Clients99 
.99 
All99 
.99 
	SendAsync99 '
(99' (
$str99( 8
,998 9
user99: >
,99> ?
message99@ G
)99G H
;99H I
}:: 	
};; 
}<< ø

s/home/thomas/stack/School/Semester 3/Individueel project/minecraft-panel-api/minecraft-panel-api.Players/Program.cs
	namespace

 	
minecraft_panel_api


 
.

 
Players

 %
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{8 9

webBuilder: D
.D E

UseStartupE O
<O P
StartupP W
>W X
(X Y
)Y Z
;Z [
}\ ]
)] ^
;^ _
} 
} Æ
s/home/thomas/stack/School/Semester 3/Individueel project/minecraft-panel-api/minecraft-panel-api.Players/Startup.cs
	namespace 	
minecraft_panel_api
 
. 
Players %
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddControllers #
(# $
)$ %
;% &
services   
.   

AddSignalR   
(    
)    !
;  ! "
services"" 
."" 
AddDbContext"" !
<""! ""
MinecraftPluginContext""" 8
>""8 9
(""9 :
opt"": =
=>""> @
opt""A D
.""D E
UseMySql""E M
(""M N
Configuration""N [
.""[ \
GetConnectionString""\ o
(""o p
$str""p ~
)""~ 
)	"" €
)
""€ 
;
"" ‚
services$$ 
.$$ 
AddCors$$ 
($$ 
options$$ $
=>$$% '
{%% 
options&& 
.&& 
AddDefaultPolicy&& (
(&&( )
builder&&) 0
=>&&1 3
{'' 
builder(( 
.(( 
WithOrigins(( '
(((' (
$str((( :
)((: ;
.)) 
AllowCredentials)) )
())) *
)))* +
.** 
AllowAnyHeader** '
(**' (
)**( )
.++ 
AllowAnyMethod++ '
(++' (
)++( )
.,, 
SetIsOriginAllowed,, +
(,,+ ,
(,,, -
host,,- 1
),,1 2
=>,,3 5
true,,6 :
),,: ;
;,,; <
}-- 
)-- 
;-- 
}.. 
).. 
;.. 
}// 	
public22 
void22 
	Configure22 
(22 
IApplicationBuilder22 1
app222 5
,225 6
IWebHostEnvironment227 J
env22K N
)22N O
{33 	
if44 
(44 
env44 
.44 
IsDevelopment44 !
(44! "
)44" #
)44# $
{55 
app66 
.66 %
UseDeveloperExceptionPage66 -
(66- .
)66. /
;66/ 0
}77 
app;; 
.;; 

UseRouting;; 
(;; 
);; 
;;; 
app== 
.== 
UseCors== 
(== 
)== 
;== 
app?? 
.?? 
UseAuthorization??  
(??  !
)??! "
;??" #
appAA 
.AA 
UseEndpointsAA 
(AA 
	endpointsAA &
=>AA' )
{BB 
	endpointsCC 
.CC 
MapControllersCC (
(CC( )
)CC) *
;CC* +
	endpointsDD 
.DD 
MapHubDD  
<DD  !
SocketTestHubDD! .
>DD. /
(DD/ 0
$strDD0 :
)DD: ;
;DD; <
}EE 
)EE 
;EE 
}FF 	
}GG 
}HH 